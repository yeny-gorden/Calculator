<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Gorden</title>
    <style>
        /* --- STYLES UTAMA --- */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #000;
            color: #fff;
        }
        .container {
            max-width: 400px;
            margin: auto;
        }
        .input-group, .select-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #fff;
        }
        input[type="number"], input[type="text"], select {
            width: 100%;
            padding: 10px;
            border: none;
            background-color: #fff;
            color: #000;
            box-sizing: border-box;
            font-size: 16px;
            border-radius: 4px;
        }
        
        /* --- HEADER & MENU HAMBURGER --- */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .header-title {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }
        .hamburger-menu {
            font-size: 30px;
            cursor: pointer;
            padding: 5px;
            line-height: 1; /* Menjaga ukuran ikon */
        }

        /* --- STYLES KONTROL & TOMBOL --- */
        .banner {
            text-align: center;
            margin-bottom: 20px;
        }
        .controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            background-color: #00f;
            color: #fff;
            margin-bottom: 20px;
        }
        .controls select, .controls label {
            margin: 0 10px;
            color: #000;
            background-color: #fff;
            padding: 5px;
            border-radius: 4px;
        }
        .controls label {
             background-color: transparent;
             color: #fff;
             font-weight: normal;
        }
        button {
            background-color: #f00;
            color: white;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            width: 100%;
            font-size: 18px;
            font-weight: bold;
            border-radius: 4px;
        }
        #hasilContainer {
            margin-top: 20px;
            padding-top: 10px;
            border-top: 2px solid #333;
        }
        #hasilContainer h3 {
            color: #fff;
            margin-top: 0;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        .result-item strong {
            color: #aaa;
        }

        /* --- MODAL (POP-UP HARGA) --- */
        .modal {
            display: none; /* Sembunyikan secara default */
            position: fixed;
            z-index: 10; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
        }
        .modal-content {
            background-color: #333;
            margin: 15% auto; /* 15% dari atas dan di tengah */
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 350px;
            border-radius: 8px;
        }
        .modal-content .input-group {
            margin-bottom: 10px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: #fff;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header-bar">
        <div class="hamburger-menu" onclick="openModal()">&#9776;</div> <div class="header-title">Kalkulator</div>
        <div></div> </div>

    <div class="input-group">
        <label for="lebar">Lebar Gorden (meter)</label>
        <input type="number" id="lebar" value="1.0" step="0.1" placeholder="meter" onchange="hitungTotal()">
    </div>

    <div class="input-group">
        <label for="tinggi">Tinggi Gorden (meter)</label>
        <input type="number" id="tinggi" value="2.5" step="0.1" placeholder="meter" onchange="hitungTotal()">
    </div>

    <div class="input-group">
        <label for="hargaKain">Harga Kain (per m)</label>
        <input type="number" id="hargaKain" value="150000" step="1000" placeholder="Rp." onchange="hitungTotal()">
    </div>

    <div class="input-group">
        <label for="hargaVitrase">Harga Vitrase (per m)</label>
        <input type="number" id="hargaVitrase" value="100000" step="1000" placeholder="Rp." onchange="hitungTotal()">
    </div>
    <div class="banner">
        
    </div>

    <div class="controls">
        <select id="modelGorden" onchange="hitungTotal()">
            <option value="plisket">Plisket</option>
            <option value="smokring" selected>Smokring</option>
            <option value="spiral">Spiral</option>
        </select>

        <select id="jenisKain" onchange="hitungTotal()">
            <option value="import" selected>Import</option>
            <option value="lokal">Lokal</option>
        </select>

        <label for="centangVitrase">
            <input type="checkbox" id="centangVitrase" checked onchange="hitungTotal()">
            Vitrase
        </label>
    </div>
    <button onclick="hitungTotal()">HITUNG</button>

    <div id="hasilContainer">
        <h3>Hasil</h3>
        <div id="hasilDetail"></div>
        <hr style="border: 1px solid #444;">
        <div class="result-item">
            <strong>TOTAL KESELURUHAN</strong>
            <span id="totalAkhir">Rp. 0</span>
        </div>
    </div>
    </div>

<div id="hargaModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h3>Update Harga Item</h3>
        
        <div class="input-group">
            <label for="priceSmokring">Harga Smokring (per buah)</label>
            <input type="number" id="priceSmokring" value="4000" step="100">
        </div>
        
        <div class="input-group">
            <label for="priceRollet">Harga Rollet (per meter)</label>
            <input type="number" id="priceRollet" value="65000" step="1000">
        </div>
        
        <div class="input-group">
            <label for="priceRell">Harga Rell (per meter)</label>
            <input type="number" id="priceRell" value="40000" step="1000">
        </div>

        <div class="input-group">
            <label for="priceHook">Harga Hook (per set)</label>
            <input type="number" id="priceHook" value="38000" step="1000">
        </div>

        <div class="input-group">
            <label for="priceTali">Harga Tali (per set)</label>
            <input type="number" id="priceTali" value="35000" step="1000">
        </div>
        
        <div class="input-group">
            <label for="priceJahit">Harga Jahit (per meter)</label>
            <input type="number" id="priceJahit" value="20000" step="1000">
        </div>
        
        <div class="input-group">
            <label for="priceInstalasi">Harga Instalasi</label>
            <input type="number" id="priceInstalasi" value="50000" step="1000">
        </div>

        <div class="input-group">
            <label for="priceStick">Harga Stick Spiral (per set)</label>
            <input type="number" id="priceStick" value="50000" step="1000">
        </div>
        
        <button onclick="savePrices()">Simpan & Hitung Ulang</button>
    </div>
</div>
<script>
    // Inisialisasi Harga Default (Sekarang disimpan di dalam objek global)
    let itemPrices = {
        smokring: 4000,
        rollet: 65000,
        rell: 40000,
        hook: 38000,
        tali: 35000,
        jahit: 20000,
        instalasi: 50000,
        stick: 50000
    };

    // --- FUNGSI MODAL (MENU HAMBURGER) ---
    const openModal = () => {
        // Muat harga yang tersimpan ke dalam input modal
        document.getElementById('priceSmokring').value = itemPrices.smokring;
        document.getElementById('priceRollet').value = itemPrices.rollet;
        document.getElementById('priceRell').value = itemPrices.rell;
        document.getElementById('priceHook').value = itemPrices.hook;
        document.getElementById('priceTali').value = itemPrices.tali;
        document.getElementById('priceJahit').value = itemPrices.jahit;
        document.getElementById('priceInstalasi').value = itemPrices.instalasi;
        document.getElementById('priceStick').value = itemPrices.stick;
        
        document.getElementById('hargaModal').style.display = "block";
    };

    const closeModal = () => {
        document.getElementById('hargaModal').style.display = "none";
    };
    
    const savePrices = () => {
        // Simpan harga dari input modal ke objek global itemPrices
        itemPrices.smokring = parseFloat(document.getElementById('priceSmokring').value) || 0;
        itemPrices.rollet = parseFloat(document.getElementById('priceRollet').value) || 0;
        itemPrices.rell = parseFloat(document.getElementById('priceRell').value) || 0;
        itemPrices.hook = parseFloat(document.getElementById('priceHook').value) || 0;
        itemPrices.tali = parseFloat(document.getElementById('priceTali').value) || 0;
        itemPrices.jahit = parseFloat(document.getElementById('priceJahit').value) || 0;
        itemPrices.instalasi = parseFloat(document.getElementById('priceInstalasi').value) || 0;
        itemPrices.stick = parseFloat(document.getElementById('priceStick').value) || 0;
        
        closeModal();
        hitungTotal(); // Hitung ulang dengan harga baru
    };
    
    // Klik di luar modal akan menutupnya
    window.onclick = (event) => {
      if (event.target == document.getElementById('hargaModal')) {
        closeModal();
      }
    };


    // Fungsi untuk memformat angka menjadi format Rupiah
    const formatRupiah = (angka) => {
        const numberString = angka.toFixed(0).toString();
        const sisa = numberString.length % 3;
        let rupiah = numberString.substr(0, sisa);
        const ribuan = numberString.substr(sisa).match(/\d{3}/g);

        if (ribuan) {
            const separator = sisa ? '.' : '';
            rupiah += separator + ribuan.join('.');
        }

        return 'Rp. ' + rupiah;
    };

    // Fungsi untuk menghitung total
    const hitungTotal = () => {
        const lebar = parseFloat(document.getElementById('lebar').value) || 0;
        const tinggi = parseFloat(document.getElementById('tinggi').value) || 0;
        const hargaKain = parseFloat(document.getElementById('hargaKain').value) || 0;
        const hargaVitrase = parseFloat(document.getElementById('hargaVitrase').value) || 0;
        const modelGorden = document.getElementById('modelGorden').value;
        const jenisKain = document.getElementById('jenisKain').value;
        const withVitrase = document.getElementById('centangVitrase').checked;

        let totalHarga = 0;
        let rincian = {};
        let pemakaianKain = 0;
        let pemakaianVitrase = 0;
        const panjangMin1m = Math.max(lebar, 1);
        
        // --- LOGIKA PERHITUNGAN KHUSUS SPIRAL ---
        if (modelGorden === 'spiral') {
            if (!withVitrase) {
                alert("Model Spiral hanya bisa menggunakan Vitrase. Pastikan kotak Vitrase dicentang.");
                document.getElementById('centangVitrase').checked = true;
                // Lanjutkan perhitungan dengan Vitrase dicentang
            }

            // Hitungan Kain/Vitrase
            pemakaianKain = (lebar + 0.2) * 3;
            rincian.kain = pemakaianKain * hargaVitrase; 
            
            // Item yang dihitung: Stick
            rincian.stick = 1 * itemPrices.stick; // Menggunakan harga dari itemPrices
            
            totalHarga = rincian.kain + rincian.stick;
            
            document.getElementById('hasilDetail').innerHTML = `
                <div class="result-item"><span>Kain Vitrase (${pemakaianKain.toFixed(2)} m)</span><span>${formatRupiah(rincian.kain)}</span></div>
                <div class="result-item"><span>Stick (1 set)</span><span>${formatRupiah(rincian.stick)}</span></div>
            `;
            document.getElementById('totalAkhir').textContent = formatRupiah(totalHarga);
            return;
        }
        
        // --- LOGIKA PERHITUNGAN SMOKRING/PLISKET ---

        // 1. Perhitungan Kain & Vitrase
        if (jenisKain === 'import') {
            pemakaianKain = (lebar + 0.2) * 3;
            rincian.kain = pemakaianKain * hargaKain;
        } else if (jenisKain === 'lokal') {
            const B = Math.ceil((lebar + 0.2) / 0.4);
            pemakaianKain = B * (tinggi + 0.3);
            rincian.kain = pemakaianKain * hargaKain;
        }
        
        if (withVitrase) {
            pemakaianVitrase = (lebar + 0.2) * 3;
            rincian.vitrase = pemakaianVitrase * hargaVitrase;
        } else {
            pemakaianVitrase = 0;
            rincian.vitrase = 0;
        }
        
        // 2. Perhitungan Rollet, Rell & Smokring (Menggunakan harga dari itemPrices)
        
        rincian.rollet = 0;
        rincian.rell = 0;
        rincian.smokring = 0;
        
        if (modelGorden === 'smokring') {
            // Rollet untuk kain
            rincian.rollet = panjangMin1m * itemPrices.rollet; 

            // Rell untuk Vitrase (jika ada)
            if (withVitrase) {
                rincian.rell = panjangMin1m * itemPrices.rell; 
            }
            
            // Hitung Smokring
            let jmlSmokring = lebar * 24;
            jmlSmokring = Math.ceil(jmlSmokring);
            if (jmlSmokring % 2 !== 0) {
                jmlSmokring += 1;
            }
            rincian.smokring = jmlSmokring * itemPrices.smokring;

        } else if (modelGorden === 'plisket') {
            // Rollet TIDAK DIHITUNG
            
            // Hitung Rell: 1x jika TANPA Vitrase, dan 2x jika DENGAN Vitrase
            let jumlahRell = withVitrase ? 2 : 1; 
            rincian.rell = (panjangMin1m * itemPrices.rell) * jumlahRell;
            
            // Smokring TIDAK DIHITUNG
        }
        
        // 3. Hook & Tali (Menggunakan harga dari itemPrices)
        rincian.hook = 1 * itemPrices.hook;
        rincian.tali = 1 * itemPrices.tali;

        // 4. Jahit (Menggunakan harga dari itemPrices)
        const totalPemakaianKainDanVitrase = pemakaianKain + pemakaianVitrase;
        rincian.jahit = totalPemakaianKainDanVitrase * itemPrices.jahit;
        
        // 5. Instalasi (Menggunakan harga dari itemPrices)
        rincian.instalasi = 1 * itemPrices.instalasi;
        
        // --- HITUNG TOTAL AKHIR ---
        totalHarga = Object.values(rincian).reduce((sum, current) => sum + current, 0);

        // --- TAMPILKAN HASIL ---
        let rincianHTML = `
            <div class="result-item"><span>Kain (${jenisKain} - ${pemakaianKain.toFixed(2)} m)</span><span>${formatRupiah(rincian.kain)}</span></div>
        `;
        
        if (withVitrase) {
            rincianHTML += `<div class="result-item"><span>Vitrase (${pemakaianVitrase.toFixed(2)} m)</span><span>${formatRupiah(rincian.vitrase)}</span></div>`;
        }
        
        if (modelGorden === 'smokring') {
            const jmlSmokring = rincian.smokring / itemPrices.smokring;
            rincianHTML += `<div class="result-item"><span>Smokring (${jmlSmokring} bh)</span><span>${formatRupiah(rincian.smokring)}</span></div>`;
            
            if (rincian.rollet > 0) {
                 rincianHTML += `<div class="result-item"><span>Rollet (${panjangMin1m.toFixed(2)} m)</span><span>${formatRupiah(rincian.rollet)}</span></div>`;
            }
            
            if (rincian.rell > 0) {
                rincianHTML += `<div class="result-item"><span>Rell Vitrase (${panjangMin1m.toFixed(2)} m)</span><span>${formatRupiah(rincian.rell)}</span></div>`;
            }

        } else if (modelGorden === 'plisket') {
            const jumlahRell = withVitrase ? 2 : 1;
            rincianHTML += `<div class="result-item"><span>Rell Plisket (${jumlahRell}x @ ${panjangMin1m.toFixed(2)} m)</span><span>${formatRupiah(rincian.rell)}</span></div>`;
        }
        
        rincianHTML += `
            <div class="result-item"><span>Hook (1 set)</span><span>${formatRupiah(rincian.hook)}</span></div>
            <div class="result-item"><span>Tali (1 set)</span><span>${formatRupiah(rincian.tali)}</span></div>
            <div class="result-item"><span>Jahit (${totalPemakaianKainDanVitrase.toFixed(2)} m)</span><span>${formatRupiah(rincian.jahit)}</span></div>
            <div class="result-item"><span>Instalasi (1x)</span><span>${formatRupiah(rincian.instalasi)}</span></div>
        `;
        
        document.getElementById('hasilDetail').innerHTML = rincianHTML;
        document.getElementById('totalAkhir').textContent = formatRupiah(totalHarga);
    };

    window.onload = hitungTotal;
</script>

</body>
</html>
